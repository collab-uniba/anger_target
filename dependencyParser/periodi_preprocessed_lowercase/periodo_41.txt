this was a very bad bug  introduced by me being an idiot     