As far as the query shit  i have no idea if solrdispatchfilter or whatever couldshould do ThreadcurrentThreadsetNamex or whatever and maybe restore after     