Whoops there's a stupid 'if (i = 5) continue' on line ~68 which I should have labelled with a NOCOMMIT that's in the patch        